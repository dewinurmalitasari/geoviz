import{c as g,j as e,b as x,G as j,h as m,am as f,an as v,N as k,r as u,t as d,ao as y}from"./index-CeQ_7HA2.js";import{G as l}from"./geo-input-BBVxjaZv.js";import{U as N}from"./user-DGJKBReo.js";import{K as w}from"./key-round-pcqFjGMt.js";import"./input-DRQBVYz2.js";import"./eye-CZSEa0nN.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],p=g("log-in",G);function L({username:t,setUsername:o,password:r,setPassword:n,onLoginClick:i,isLoading:c}){return e.jsx("div",{children:e.jsx(x,{icon:e.jsx(p,{className:"text-deep-purple-600 w-6 h-6"}),title:"Masuk ke GeoViz",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx(l,{id:"username",label:"Username",value:m.decode(t),onChange:a=>o(m.encode(a.target.value)),icon:e.jsx(N,{})}),e.jsx(l,{id:"password",label:"Password",value:r,onChange:a=>n(a.target.value),icon:e.jsx(w,{}),isPassword:!0})]}),footer:e.jsxs(j,{onClick:i,variant:"primary",isLoading:c,children:[e.jsx(p,{})," Masuk"]})})})}const C={login:t=>f.post(v.auth.login,t)};function _(){const t=k(),[o,r]=u.useState(""),[n,i]=u.useState(""),[c,a]=u.useState(!1),h=async()=>{if(!o||!n){d.error("Username dan password harus terisi!");return}a(!0);try{const s=await C.login({username:o,password:n});y(s.user._id,s.user.username,s.user.role,s.token),d.success(`Selamat Datang! ${m.decode(s.user.username)}`),t({to:"/"})}catch(s){d.error("Gagal Login: "+s.message)}finally{a(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(L,{username:o,setUsername:r,password:n,setPassword:i,onLoginClick:h,isLoading:c})})}export{_ as component};
