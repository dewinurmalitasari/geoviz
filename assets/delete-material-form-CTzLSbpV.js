import{c as $,j as i,h as r,k as w,G as x,r as L,t as f,m as v,D as T}from"./index-CeQ_7HA2.js";import{G as g}from"./geo-input-BBVxjaZv.js";import{F}from"./form-dialog-DtrkgT1B.js";import{S as I}from"./scroll-area-Mw2U67h-.js";import{M}from"./minus-CARIRyBU.js";import{P as C}from"./plus-DoolWeGV.js";import{F as P}from"./file-text-CFd6p5Bn.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],D=$("link",z);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],B=$("type",q);function Y({open:p,onOpenChange:d,isProcessing:a=!1,isEdit:u=!1,toEditTitle:k,values:e,setValues:o,onClick:n,onDeleteClick:y,trigger:j,maxYoutubeLinks:l=4,maxImageLinks:h=10}){const b=()=>{const s=e.youtubeLinks||[];s.length<l&&o({...e,youtubeLinks:[...s,""]})},E=s=>{const t=e.youtubeLinks||[];t.length>0&&o({...e,youtubeLinks:t.filter((c,m)=>m!==s)})},G=(s,t)=>{const c=e.youtubeLinks||[];o({...e,youtubeLinks:c.map((m,N)=>N===s?t:m)})},_=()=>{const s=e.imageLinks||[];s.length<h&&o({...e,imageLinks:[...s,""]})},R=s=>{const t=e.imageLinks||[];t.length>0&&o({...e,imageLinks:t.filter((c,m)=>m!==s)})},S=(s,t)=>{const c=e.imageLinks||[];o({...e,imageLinks:c.map((m,N)=>N===s?t:m)})};return i.jsx(F,{open:p,onOpenChange:d,isProcessing:a,isEdit:u,title:u?`Edit ${r.decode(k)}`:"Tambah Materi",icon:i.jsx(P,{}),onSubmit:n,onDelete:y,trigger:j,children:i.jsx(I,{className:"h-[45vh] md:h-[60vh] pr-2",children:i.jsxs("div",{className:"space-y-4 p-1",children:[i.jsx(g,{id:"title",label:"Judul",value:r.decode(e.title??""),onChange:s=>o({...e,title:s.target.value}),icon:i.jsx(B,{})}),i.jsx(g,{id:"description",label:"Deskripsi",value:r.decode(e.description??""),onChange:s=>o({...e,description:s.target.value}),multiline:!0,minRows:3,maxRows:15}),i.jsx(g,{id:"formula",label:"Rumus",value:r.decode(e.formula??""),onChange:s=>o({...e,formula:s.target.value}),multiline:!0,minRows:3,maxRows:15}),i.jsx(g,{id:"example",label:"Contoh",value:r.decode(e.example??""),onChange:s=>o({...e,example:s.target.value}),multiline:!0,minRows:3,maxRows:15}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h4",{className:"font-semibold text-gray-800",children:"Link YouTube"}),i.jsx("div",{className:"space-y-2",children:(e.youtubeLinks||[]).map((s,t)=>i.jsxs("div",{className:w("flex items-center gap-2 p-3 bg-gray-50 rounded-lg border border-gray-200","transition-all duration-200 hover:bg-gray-100"),children:[i.jsx(g,{id:`youtube-${t}`,label:`Video ${t+1}`,value:r.decode(s),onChange:c=>G(t,c.target.value),icon:i.jsx(D,{className:"w-4 h-4 text-gray-500"}),className:"flex-1",description:"format https://www.youtube.com/watch?v=VIDEO_ID"}),i.jsx(x,{variant:"secondary",onClick:()=>E(t),disabled:(e.youtubeLinks||[]).length<=0,className:"h-9 w-9 p-0 shrink-0",children:i.jsx(M,{className:"w-4 h-4"})})]},t))}),i.jsxs(x,{variant:"secondary",onClick:b,disabled:(e.youtubeLinks||[]).length>=l,className:"w-full",children:[i.jsx(C,{className:"w-4 h-4 mr-2"}),"Tambah Link YouTube ",(e.youtubeLinks||[]).length>=l&&`(Maks: ${l})`]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h4",{className:"font-semibold text-gray-800",children:"Link Gambar"}),i.jsx("div",{className:"space-y-2",children:(e.imageLinks||[]).map((s,t)=>i.jsxs("div",{className:w("flex items-center gap-2 p-3 bg-gray-50 rounded-lg border border-gray-200","transition-all duration-200 hover:bg-gray-100"),children:[i.jsx(g,{id:`image-${t}`,label:`Gambar ${t+1}`,value:r.decode(s),onChange:c=>S(t,c.target.value),icon:i.jsx(D,{className:"w-4 h-4 text-gray-500"}),className:"flex-1",description:"format https://example.com/image.jpg"}),i.jsx(x,{variant:"secondary",onClick:()=>R(t),disabled:(e.imageLinks||[]).length<=0,className:"h-9 w-9 p-0 shrink-0",children:i.jsx(M,{className:"w-4 h-4"})})]},t))}),i.jsxs(x,{variant:"secondary",onClick:_,disabled:(e.imageLinks||[]).length>=h,className:"w-full",children:[i.jsx(C,{className:"w-4 h-4 mr-2"}),"Tambah Link Gambar ",(e.imageLinks||[]).length>=h&&`(Maks: ${h})`]})]})]})})})}function W({open:p,setOpen:d,material:a,onSuccess:u,onDeleteClick:k}){const[e,o]=L.useState(!1),[n,y]=L.useState({title:a.title,description:a.description,formula:a.formula,example:a.example,youtubeLinks:a.youtubeLinks,imageLinks:a.imageLinks});L.useEffect(()=>{y({title:a.title,description:a.description,formula:a.formula,example:a.example,youtubeLinks:a.youtubeLinks,imageLinks:a.imageLinks})},[a]);const j=async()=>{if(!n.title||!n.description||!n.formula||!n.example){f.error("Semua field harus diisi!");return}o(!0);try{const l={...n,title:r.encode(n.title),description:r.encode(n.description),formula:r.encode(n.formula),example:r.encode(n.example),youtubeLinks:n.youtubeLinks.map(b=>r.encode(b)),imageLinks:n.imageLinks.map(b=>r.encode(b))},h=await v.updateMaterial(a._id,l);f.success(`Materi "${r.decode(h.material.title)}" berhasil diperbarui!`),u(),d(!1)}catch(l){f.error("Gagal memperbarui: "+l.message)}finally{o(!1)}};return i.jsx("div",{children:i.jsx(Y,{isProcessing:e,values:n,setValues:y,onClick:j,open:p,onOpenChange:d,isEdit:!0,toEditTitle:a.title,onDeleteClick:k})})}function X({open:p,onOpenChange:d,material:a,onSuccess:u}){const[k,e]=L.useState(!1),o=async()=>{e(!0);try{await v.deleteMaterial(a._id),f.success(`Berhasil menghapus materi "${a.title}"`),u(),d(!1)}catch(n){f.error("Gagal menghapus: "+n.message)}finally{e(!1)}};return i.jsx("div",{children:i.jsx(T,{open:p,onOpenChange:d,onDeleteClick:o,isProcessing:k,item:`Materi "${a.title}"`})})}export{X as D,W as E,Y as M};
