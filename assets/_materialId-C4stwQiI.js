import{c as i,g as k,d as S,a6 as L,a7 as M,r,j as e,h as l,G as R,b as C,S as _}from"./index-CeQ_7HA2.js";import{P as E}from"./page-header-YNPf6UAV.js";import{E as D,D as O}from"./delete-material-form-CTzLSbpV.js";import{R as I}from"./reaction-select-BDj2UULM.js";import{P as $}from"./form-dialog-DtrkgT1B.js";import{B as u}from"./book-open-BH0mIYPb.js";import"./geo-input-BBVxjaZv.js";import"./input-DRQBVYz2.js";import"./eye-CZSEa0nN.js";import"./scroll-area-Mw2U67h-.js";import"./index-BdQq_4o_.js";import"./minus-CARIRyBU.js";import"./plus-DoolWeGV.js";import"./file-text-CFd6p5Bn.js";import"./popover-C0akYUsG.js";import"./smile-BkfalyiH.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],G=i("calculator",B);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],V=i("image",P);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],F=i("lightbulb",z);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],T=i("video",A);function ie(){const c=k(),n=S(),g=L(),{material:t,reaction:b}=M.useLoaderData(),[y,d]=r.useState(!1),[j,m]=r.useState(!1),[p,o]=r.useState(null),[f,v]=r.useState(b||null),[w,h]=r.useState(!1),x=t.youtubeLinks?.map(s=>{const a=s.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&]+)/);return a?a[1]:null}).filter(Boolean)||[],N=async s=>{h(!0),await _.recordReaction({reaction:s,type:"material",materialId:t._id}).then(a=>{v(a.reaction)}).catch(a=>{console.error("Error recording reaction:",a)}),h(!1)};return e.jsxs("div",{className:"flex flex-col flex-grow px-4 md:px-16 space-y-4",children:[e.jsx(E,{title:l.decode(t.title),description:"Detail materi transformasi geometri",colorScheme:"yellow",additionalButtons:c?.user.role==="admin"&&e.jsxs(R,{onClick:()=>d(!0),variant:"secondary",className:"w-full md:w-fit",children:[e.jsx($,{})," Edit"]})}),e.jsx(C,{icon:e.jsx(u,{}),title:l.decode(t.title),content:e.jsxs("div",{className:"space-y-6",children:[x.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(T,{className:"w-5 h-5 text-red-600"}),e.jsx("h3",{className:"text-lg font-semibold text-deep-purple-700",children:"Video Pembelajaran"})]}),e.jsx("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 overflow-x-auto py-2",children:x.map((s,a)=>e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"aspect-video bg-black rounded-lg overflow-hidden",children:e.jsx("iframe",{src:`https://www.youtube.com/embed/${s}`,title:`YouTube video ${a+1}`,className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})},a))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(u,{className:"w-5 h-5 text-deep-purple-600"}),e.jsx("h3",{className:"text-lg font-semibold text-deep-purple-700",children:"Deskripsi"})]}),e.jsx("p",{className:"text-gray-700 leading-relaxed bg-gray-50 p-4 rounded-lg border-l-4 border-deep-purple-300 whitespace-pre-line",children:l.decode(t.description)})]}),t.formula&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(G,{className:"w-5 h-5 text-green-600"}),e.jsx("h3",{className:"text-lg font-semibold text-deep-purple-700",children:"Rumus"})]}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsx("p",{className:"font-mono text-lg text-gray-800 text-center font-medium whitespace-pre-line",children:l.decode(t.formula)})})]}),t.example&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(F,{className:"w-5 h-5 text-amber-600"}),e.jsx("h3",{className:"text-lg font-semibold text-deep-purple-700",children:"Contoh"})]}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:e.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-line",children:l.decode(t.example)})})]}),t.imageLinks&&t.imageLinks.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(V,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-deep-purple-700",children:"Gambar Referensi"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:t.imageLinks.map((s,a)=>e.jsx("div",{className:"overflow-hidden rounded-lg border border-gray-200 cursor-pointer transition-all duration-300 hover:shadow-lg hover:scale-105",onClick:()=>o(s),children:e.jsx("img",{src:s,alt:`Gambar referensi ${a+1}`,className:"w-full h-48 object-cover"})},a))})]})]}),header:c?.user.role==="student"&&e.jsx(I,{onSelect:N,value:f?.reaction,isLoading:w,headerType:"material"})}),p&&e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:()=>o(null),children:[e.jsx("div",{className:"max-w-4xl max-h-full",children:e.jsx("img",{src:p,alt:"Enlarged view",className:"w-full h-auto max-h-[90vh] object-contain rounded-lg"})}),e.jsx("button",{className:"absolute top-4 right-4 text-white text-2xl bg-black bg-opacity-50 rounded-full w-10 h-10 flex items-center justify-center hover:bg-opacity-75 transition-colors",onClick:()=>o(null),children:"Ã—"})]}),e.jsx(D,{open:y,setOpen:d,material:t,onSuccess:()=>{n.invalidate()},onDeleteClick:()=>{m(!0)}}),e.jsx(O,{open:j,onOpenChange:()=>{m(!1),g({to:".."})},material:t,onSuccess:()=>{n.invalidate()}})]})}export{ie as component};
